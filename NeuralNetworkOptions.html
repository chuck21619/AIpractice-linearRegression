<!DOCTYPE html>
<html>
<head>
    <title>Neural Network Options</title>
</head>
<body>
    <button id="addLayerBtn">+</button>
    <table id="nnTable">
    </table>
    <script>
        const table = document.getElementById('nnTable');
        const addLayerBtn = document.getElementById('addLayerBtn');
        let numLayers = 1;
        let neuronCounts = [1]; // Initialize with a default value for the first layer

        function createTable() {
            table.innerHTML = ''; // Clear the table
            let headerRow = table.insertRow();
            let dropdownRow = table.insertRow();
            let removeButtonRow = table.insertRow();

            for (let i = 0; i < numLayers; i++) {
                // Header Row (Layer Number)
                let headerCell = headerRow.insertCell();
                headerCell.textContent = `Layer ${i + 1}`;

                // Dropdown Row (Neuron Selection)
                let dropdownCell = dropdownRow.insertCell();
                let dropdown = document.createElement('select');
                dropdown.id = `layer${i + 1}`; // Add an ID to the dropdown
                for (let j = 1; j <= 1000; j++) {
                    let option = document.createElement('option');
                    option.value = j;
                    option.text = j;
                    dropdown.add(option);
                }
                dropdown.value = neuronCounts[i]; // Set the selected value
                dropdownCell.appendChild(dropdown);

                // Remove Button Row
                let removeButtonCell = removeButtonRow.insertCell();
                let removeButton = document.createElement('button');
                removeButton.textContent = '-';
                removeButton.addEventListener('click', () => removeLayer(i));
                removeButtonCell.appendChild(removeButton);

                // Hide remove button if only one layer
                if (numLayers === 1) {
                    removeButton.style.display = 'none';
                } else {
                    removeButton.style.display = '';
                }
            }
        }

        function addLayer() {
            // Store current neuron counts
            storeNeuronCounts();
            numLayers++;
            neuronCounts.push(1); // Default value for the new layer
            createTable();
            restoreNeuronCounts();
        }

        function removeLayer(index) {
            if (numLayers > 1) {
                // Store current neuron counts
                storeNeuronCounts();
                numLayers--;
                neuronCounts.splice(index, 1); // Remove the neuron count for the removed layer
                createTable();
                restoreNeuronCounts();
            }
        }

        function storeNeuronCounts() {
            neuronCounts = [];
            for (let i = 1; i <= numLayers; i++) {
                let dropdown = document.getElementById(`layer${i}`);
                neuronCounts.push(parseInt(dropdown.value));
            }
        }

        function restoreNeuronCounts() {
            for (let i = 1; i <= numLayers; i++) {
                let dropdown = document.getElementById(`layer${i}`);
                dropdown.value = neuronCounts[i - 1];
            }
        }

        addLayerBtn.addEventListener('click', addLayer);
        createTable(); // Initial table creation
    </script>
</body>
</html>
